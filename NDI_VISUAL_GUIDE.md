# NDI Video Background - Visual Guide

## Before vs After

### BEFORE (Current - Black Background)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Live Text System - Stage Control               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Text Input                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                             â”‚ â”‚
â”‚ â”‚           â–  BLACK BACKGROUND â–               â”‚ â”‚
â”‚ â”‚                                             â”‚ â”‚
â”‚ â”‚              Hello World                    â”‚ â”‚
â”‚ â”‚         (white text on black)               â”‚ â”‚
â”‚ â”‚                                             â”‚ â”‚
â”‚ â”‚           â–  BLACK BACKGROUND â–               â”‚ â”‚
â”‚ â”‚                                             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚ Controls: [Small] [Big]                        â”‚
â”‚ Health: â— ONLINE                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AFTER (With NDI - Video Background)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Live Text System - Stage Control               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Text Input                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚ â”‚
â”‚ â”‚  â•‘ ðŸŽ¥ RESOLUME VIDEO FEED (50% opacity) â•‘ â”‚ â”‚
â”‚ â”‚  â•‘    [Moving visuals/graphics/video]    â•‘ â”‚ â”‚
â”‚ â”‚  â•‘                                        â•‘ â”‚ â”‚
â”‚ â”‚  â•‘          Hello World                   â•‘ â”‚ â”‚
â”‚ â”‚  â•‘    (white text overlaid on video)      â•‘ â”‚ â”‚
â”‚ â”‚  â•‘                                        â•‘ â”‚ â”‚
â”‚ â”‚  â•‘    [Moving visuals/graphics/video]    â•‘ â”‚ â”‚
â”‚ â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚ Controls: [Small] [Big]                        â”‚
â”‚ Health: â— ONLINE | NDI: â— Connected            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Rendering Layers (Bottom to Top)

```
Layer 5 (Top):     â”‚ White Text â”‚  â† Always visible, 100% opacity
                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Layer 4:           â”‚ Text Selection Highlight (blue) â”‚
                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Layer 3:           â”‚ Cursor (white vertical line) â”‚
                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Layer 2:           â”‚ NDI Video Texture (50% opacity) â”‚  â† NEW!
                   â”‚ BGRA format, updated 30-60fps    â”‚
                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Layer 1 (Bottom):  â”‚ ImGui Input Widget (black bg) â”‚
```

---

## Example Use Cases

### 1. Live Event with Branding
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Company Logo Animation] â† NDI     â”‚
â”‚                                     â”‚
â”‚    "Thank you for attending!"       â”‚
â”‚         â† Live Text Input           â”‚
â”‚                                     â”‚
â”‚ [Company Logo Animation] â† NDI     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Worship/Church Service
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Worship Background Video] â† NDI   â”‚
â”‚                                     â”‚
â”‚     "Amazing Grace"                 â”‚
â”‚     "How sweet the sound..."        â”‚
â”‚         â† Live Text Input           â”‚
â”‚                                     â”‚
â”‚ [Worship Background Video] â† NDI   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Theater/Stage Production
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Scene Background/Set] â† NDI       â”‚
â”‚                                     â”‚
â”‚         "Act II, Scene 3"           â”‚
â”‚         â† Live Text Input           â”‚
â”‚                                     â”‚
â”‚ [Scene Background/Set] â† NDI       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Conference/Presentation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Slide Deck from PowerPoint] â† NDI â”‚
â”‚                                     â”‚
â”‚   "Next Speaker: John Doe"          â”‚
â”‚         â† Live Text Input           â”‚
â”‚                                     â”‚
â”‚ [Slide Deck from PowerPoint] â† NDI â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## NDI Source Examples

### Resolume (VJ Software)
- Output your visual composition as NDI
- Real-time effects, videos, graphics
- Best for: Events, concerts, stage shows

### OBS Studio (Streaming Software)
- Share your entire scene as NDI
- Includes webcam, overlays, gameplay
- Best for: Streaming, recording, multi-cam setups

### vMix (Production Software)
- Professional multi-camera production
- NDI inputs/outputs for all sources
- Best for: Professional broadcasts

### PowerPoint/Keynote (via NDI Tools)
- Screen capture via NDI Scan Converter
- Share presentation slides live
- Best for: Conferences, corporate events

### After Effects (via NDI Plugin)
- Real-time motion graphics
- Live preview of animations
- Best for: Motion design, broadcast graphics

---

## Text Visibility Matrix

| Video Brightness | Text Visibility | Recommended Alpha |
|-----------------|-----------------|-------------------|
| Very Dark       | â˜…â˜…â˜…â˜…â˜…          | 75-100% (IM_COL32 192-255) |
| Dark            | â˜…â˜…â˜…â˜…â˜†          | 50-75% (IM_COL32 128-192) |
| Medium          | â˜…â˜…â˜…â˜†â˜†          | 25-50% (IM_COL32 64-128) |
| Bright          | â˜…â˜…â˜†â˜†â˜†          | 10-25% (IM_COL32 25-64) |
| Very Bright     | â˜…â˜†â˜†â˜†â˜†          | Use text shadow/outline |

**Current Setting:** 50% alpha (IM_COL32 128) - Good for most content

---

## Transparency Comparison

### 25% Opacity (Subtle Video)
```
Text is primary focus
Video is subtle background hint
Good for: Important announcements, lyrics
```

### 50% Opacity (Balanced) â˜… CURRENT
```
Text and video equally visible
Balanced composition
Good for: General use, events
```

### 75% Opacity (Prominent Video)
```
Video is primary focus
Text is overlay
Good for: Artistic displays, ambiance
```

### 100% Opacity (Full Video)
```
Video fully visible
Text may be hard to read
Good for: Testing, creative effects
```

---

## Performance Visual

### System Resources with NDI @ 1080p30

```
CPU Usage:
[â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 4-5%

GPU Usage:
[â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 2%

Network Bandwidth:
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 5-10 Mbps (preview mode)

Frame Latency:
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘] 33-50ms (1-2 frames)

App Frame Rate:
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 60 FPS (unchanged)
```

**Conclusion:** Minimal impact on performance!

---

## Troubleshooting Visuals

### Symptom: Black rectangle instead of video
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚  â† No video texture
â”‚   Hello World   â”‚  â† Text still visible
â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Check:
âœ— NDI source not sending
âœ— Wrong source name
âœ— Network/firewall issue
```

### Symptom: Laggy/stuttering video
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [lag] frame 1   â”‚
â”‚ [lag] frame 1   â”‚  â† Same frame repeated
â”‚ [lag] frame 2   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Check:
âœ— High resolution source (use 720p)
âœ— WiFi network (use ethernet)
âœ— CPU overload (close other apps)
```

### Symptom: Video is stretched/distorted
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚  â† Video stretched
â”‚   Wide Video    â”‚  â† Wrong aspect ratio
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Solution:
â†’ Future enhancement (aspect-fit)
â†’ Currently fills entire input area
```

---

## Configuration Quick Reference

### File Locations
- **NDI init:** `src/sender/SenderApp.cpp:910-939`
- **Texture update:** `src/sender/SenderApp.cpp:942-974`
- **Rendering:** `src/sender/SenderApp.cpp:976-1009`
- **Source selection:** Line 922
- **Transparency:** Line 1007

### Key Settings
```cpp
// Line 922: NDI source name
ndiReceiver_->connect("Resolume");  // Change "Resolume" to your source

// Line 1007: Video transparency
IM_COL32(255, 255, 255, 128);  // Change 128 to 0-255

// Line 924: Bandwidth mode (already optimal)
recvCreate.bandwidth = NDIlib_recv_bandwidth_lowest;

// Line 925: Color format (already optimal)
recvCreate.color_format = NDIlib_recv_color_format_BGRX_BGRA;
```

---

## Expected Console Output

### Successful NDI Connection
```
Loaded ABF font for text input: fonts/ABF.ttf
UDP Publisher initialized on 224.0.1.1:9999
UDP Publisher initialized on 224.0.1.2:9999
Initializing NDI receiver...
Searching for NDI sources...
Found 2 NDI source(s):
  [0] MACBOOK (Resolume Composition)
  [1] DESKTOP (OBS Main Output)
Connected to NDI source: MACBOOK (Resolume Composition)
NDI frame size: 1920x1080
Live Text Sender started successfully
Press ESC or close window to exit
```

### No NDI Sources Available
```
Initializing NDI receiver...
Searching for NDI sources...
Found 0 NDI source(s)
No NDI sources found
Warning: No NDI source found. Video background disabled.
Live Text Sender started successfully
```

### NDI Not Compiled
```
Initializing NDI receiver...
NDI support not compiled in. Build with -DENABLE_NDI=ON
Warning: Failed to initialize NDI. Video background disabled.
Live Text Sender started successfully
```

---

## Next Steps

1. **Install NDI SDK** â†’ See `NDI_SETUP.md`
2. **Rebuild project** â†’ `cmake .. && make sender`
3. **Start Resolume** â†’ Enable NDI output
4. **Run sender** â†’ `./sender`
5. **Type text** â†’ See it overlaid on video!

Enjoy your new NDI video background! ðŸŽ¥âœ¨
